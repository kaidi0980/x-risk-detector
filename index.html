<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>X è´¦å·é£é™©æ£€æµ‹å™¨ by Grok</title>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <style>
    :root {
      --primary: #1DA1F2;
      --danger: #E0245E;
      --warning: #F5A623;
      --success: #17BF63;
      --dark: #15202B;
      --light: #F7F9FA;
    }
    * { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', sans-serif; }
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 800px;
      margin: 40px auto;
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
    }
    h1 {
      text-align: center;
      margin-bottom: 10px;
      font-size: 2rem;
    }
    .subtitle {
      text-align: center;
      opacity: 0.8;
      margin-bottom: 30px;
    }
    .input-group {
      display: flex;
      margin-bottom: 20px;
      border-radius: 50px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    input {
      flex: 1;
      padding: 16px 20px;
      border: none;
      font-size: 1.1rem;
      outline: none;
    }
    button {
      padding: 0 30px;
      background: var(--primary);
      color: white;
      border: none;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover { background: #0d8bd9; }
    .loading {
      text-align: center;
      padding: 40px;
      font-size: 1.2rem;
      display: none;
    }
    .result { display: none; margin-top: 30px; }
    .score-circle {
      width: 120px; height: 120px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      font-weight: bold;
      margin: 20px auto;
      color: white;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
    }
    .low { background: var(--success); }
    .medium { background: var(--warning); }
    .high { background: var(--danger); }

    .card {
      background: rgba(255,255,255,0.15);
      border-radius: 15px;
      padding: 20px;
      margin: 15px 0;
      backdrop-filter: blur(5px);
    }
    .card h3 {
      margin-bottom: 10px;
      color: #fff;
    }
    .risk-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .export-btn {
      margin-top: 20px;
      text-align: center;
    }
    .export-btn button {
      background: #fff;
      color: var(--dark);
      padding: 10px 20px;
      border-radius: 50px;
    }
    footer {
      text-align: center;
      margin-top: 50px;
      opacity: 0.7;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>ğŸš¨ X è´¦å·é£é™©æ£€æµ‹å™¨</h1>
  <p class="subtitle">åŸºäºå…¬å¼€æ•°æ® + AI åˆ†æï¼Œç§’å‡ºé£é™©æŠ¥å‘Š</p>

  <div class="input-group">
    <input type="text" id="handle" placeholder="è¾“å…¥ X ç”¨æˆ·åï¼Œå¦‚ @Starlight1_123" />
    <button onclick="checkRisk()">æ£€æµ‹</button>
  </div>

  <div class="loading" id="loading">ğŸ” æ­£åœ¨åˆ†æè´¦å·æ•°æ®...</div>

  <div class="result" id="result">
    <div class="score-circle" id="scoreCircle">85</div>
    <h2 style="text-align:center" id="riskLevel">ä½é£é™©</h2>

    <div class="card">
      <h3>ğŸ“Š é£é™©è¯¦æƒ…</h3>
      <div id="riskDetails"></div>
    </div>

    <div class="card">
      <h3>âš¡ å¿«é€Ÿå»ºè®®</h3>
      <div id="suggestions"></div>
    </div>

    <div class="export-btn">
      <button onclick="exportPDF()">ğŸ“„ å¯¼å‡º PDF æŠ¥å‘Š</button>
    </div>
  </div>
</div>

<footer>
  Powered by <a href="https://x.ai" target="_blank" style="color:#fff">Grok API</a> | ä»…ä¾›å‚è€ƒï¼Œéå®˜æ–¹å·¥å…·
</footer>

<script>
async function checkRisk() {
  const handle = document.getElementById('handle').value.trim().replace('@', '');
  if (!handle) return alert('è¯·è¾“å…¥ X ç”¨æˆ·å');

  document.getElementById('loading').style.display = 'block';
  document.getElementById('result').style.display = 'none';

  try {
    // æ¨¡æ‹Ÿè°ƒç”¨ Grok API æˆ–ç¬¬ä¸‰æ–¹ X æ•°æ®æ¥å£
    // å®é™…éƒ¨ç½²è¯·æ›¿æ¢ä¸ºçœŸå® APIï¼ˆè§ä¸‹æ–¹è¯´æ˜ï¼‰
    const mockData = await mockAnalyze(handle);
    
    displayResult(mockData);
  } catch (err) {
    alert('æ£€æµ‹å¤±è´¥ï¼š' + err.message);
  } finally {
    document.getElementById('loading').style.display = 'none';
  }
}

// æ¨¡æ‹Ÿåˆ†æå‡½æ•°ï¼ˆå®é™…è¯·æ¥å…¥çœŸå® APIï¼‰
async function mockAnalyze(handle) {
  await new Promise(r => setTimeout(r, 1800)); // æ¨¡æ‹Ÿå»¶è¿Ÿ

  // æ¨¡æ‹Ÿé£é™©æ•°æ®ï¼ˆå¯æ›¿æ¢ä¸ºçœŸå® API è¿”å›ï¼‰
  const data = {
    username: `@${handle}`,
    avatar: `https://unpkg.com/avatars@${handle.charCodeAt(0) % 10}/avatar.svg`,
    verified: handle === 'Starlight1_123',
    followers: Math.floor(Math.random() * 20000) + 1000,
    accountAgeDays: Math.floor(Math.random() * 600) + 100,
    spamScore: Math.random() > 0.7 ? 'é«˜' : Math.random() > 0.4 ? 'ä¸­' : 'ä½',
    risks: [
      { name: 'åƒåœ¾ä¿¡æ¯é£é™©', level: 'ä½', desc: 'å‘å¸–é¢‘ç‡æ­£å¸¸ï¼Œæ— é‡å¤å†…å®¹' },
      { name: 'è´¦å·è¢«é»‘é£é™©', level: 'ä½', desc: 'æ— å¼‚å¸¸ç™»å½•è®°å½•' },
      { name: 'å†…å®¹è¿è§„é£é™©', level: 'ä¸­', desc: 'æ¨å¹¿å·¥å…·éœ€æ³¨æ„åˆè§„æ€§' },
      { name: 'é’“é±¼é“¾æ¥é£é™©', level: 'ä½', desc: 'æœªæ£€æµ‹åˆ°å¯ç–‘åŸŸå' }
    ],
    score: Math.floor(Math.random() * 30) + 70, // 70-100
    suggestions: [
      'å¯ç”¨ä¸¤æ­¥éªŒè¯ï¼ˆ2FAï¼‰',
      'é¿å…é¢‘ç¹å‘å¸ƒç›¸åŒé“¾æ¥',
      'å®šæœŸæ£€æŸ¥ç™»å½•è®¾å¤‡',
      'å†…å®¹æ·»åŠ å…è´£å£°æ˜'
    ]
  };

  // è®¡ç®—ç»¼åˆè¯„åˆ†
  let base = 90;
  if (data.accountAgeDays < 180) base -= 15;
  if (!data.verified) base -= 10;
  if (data.spamScore !== 'ä½') base -= 20;
  data.score = Math.max(0, Math.min(100, base));

  return data;
}

function displayResult(data) {
  const score = data.score;
  const level = score >= 80 ? 'ä½é£é™©' : score >= 60 ? 'ä¸­é£é™©' : 'é«˜é£é™©';
  const color = score >= 80 ? 'low' : score >= 60 ? 'medium' : 'high';

  document.getElementById('scoreCircle').textContent = score;
  document.getElementById('scoreCircle').className = `score-circle ${color}`;
  document.getElementById('riskLevel').textContent = level;

  // é£é™©è¯¦æƒ…
  const details = document.getElementById('riskDetails');
  details.innerHTML = data.risks.map(r => `
    <div class="risk-item">
      <span>${r.name}</span>
      <span style="color:${r.level==='é«˜'?'#E0245E':r.level==='ä¸­'?'#F5A623':'#17BF63'}">
        ${r.level}é£é™©
      </span>
    </div>
  `).join('');

  // å»ºè®®
  document.getElementById('suggestions').innerHTML = data.suggestions.map(s => 
    `<div style="margin:8px 0; padding-left:20px; position:relative">
      <span style="position:absolute;left:0">âœ“</span> ${s}
    </div>`
  ).join('');

  document.getElementById('result').style.display = 'block';
  window.resultData = data; // ç”¨äºå¯¼å‡º
}

// å¯¼å‡º PDF
function exportPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  const data = window.resultData;

  doc.setFont('helvetica');
  doc.setFontSize(20);
  doc.text('X è´¦å·é£é™©æ£€æµ‹æŠ¥å‘Š', 105, 20, { align: 'center' });

  doc.setFontSize(12);
  doc.text(`è´¦å·: ${data.username}`, 20, 40);
  doc.text(`æ£€æµ‹æ—¶é—´: ${new Date().toLocaleString()}`, 20, 48);

  doc.setFontSize(16);
  doc.text(`é£é™©è¯„åˆ†: ${data.score}ï¼ˆ${data.score>=80?'ä½':data.score>=60?'ä¸­':'é«˜'}é£é™©ï¼‰`, 20, 65);

  let y = 85;
  doc.setFontSize(12);
  doc.text('é£é™©é¡¹ï¼š', 20, y); y += 10;
  data.risks.forEach(r => {
    doc.text(`â€¢ ${r.name}: ${r.level}é£é™©`, 30, y); y += 8;
  });

  y += 10;
  doc.text('å»ºè®®ï¼š', 20, y); y += 10;
  data.suggestions.forEach(s => {
    doc.text(`âœ“ ${s}`, 30, y); y += 8;
  });

  doc.save(`${data.username}_é£é™©æŠ¥å‘Š.pdf`);
}
</script>

</body>
</html>